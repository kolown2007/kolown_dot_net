import{k as j,S as D,i as I,s as M,e as p,a as C,b as d,m as E,c as y,d as m,t as w,o as v,p as V,g as b,q as N,u as L,v as q,w as Y,x as S,l as O,y as z,n as A,z as G}from"./app-CPsLQVNl.js";import{a as H}from"./ably-CbuUW7j5.js";function J(i){const e=i-1;return e*e*e+1}function R(i,{delay:e=0,duration:t=400,easing:r=J,x:o=0,y:s=0,opacity:a=0}={}){const n=getComputedStyle(i),l=+n.opacity,c=n.transform==="none"?"":n.transform,k=l*(1-a),[f,u]=j(o),[_,h]=j(s);return{delay:e,duration:t,easing:r,css:(g,U)=>`
			transform: ${c} translate(${(1-g)*f}${u}, ${(1-g)*_}${h});
			opacity: ${l-k*U}`}}function T(i,e,t){const r=i.slice();return r[9]=e[t],r[11]=t,r}function $(i){let e,t=[],r=new Map,o,s=L(i[2]);const a=n=>n[9].id;for(let n=0;n<s.length;n+=1){let l=T(i,s,n),c=a(l);r.set(c,t[n]=x(c,l))}return{c(){e=p("div");for(let n=0;n<t.length;n+=1)t[n].c();d(e,"class","grid grid-cols-3 gap-10 px-10 py-10")},m(n,l){y(n,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);o=!0},p(n,l){l&12&&(s=L(n[2]),q(),t=Y(t,l,a,1,n,s,r,e,G,x,null,T),V())},i(n){if(!o){for(let l=0;l<s.length;l+=1)w(t[l]);o=!0}},o(n){for(let l=0;l<t.length;l+=1)v(t[l]);o=!1},d(n){n&&b(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function x(i,e){let t,r,o,s,a,n,l,c;function k(){return e[4](e[11])}return{key:i,first:null,c(){t=p("div"),r=p("img"),s=C(),S(r.src,o=e[9].url)||d(r,"src",o),d(r,"alt","Heart"),d(r,"class","w-16"),this.first=t},m(f,u){y(f,t,u),m(t,r),m(t,s),n=!0,l||(c=O(r,"click",k),l=!0)},p(f,u){e=f,(!n||u&4&&!S(r.src,o=e[9].url))&&d(r,"src",o)},i(f){n||(a&&a.end(1),n=!0)},o(f){f&&(a=z(t,R,{y:-200,duration:500})),n=!1},d(f){f&&b(t),f&&a&&a.end(),l=!1,c()}}}function P(i){let e,t,r,o,s,a,n;return{c(){e=p("div"),t=p("div"),r=p("p"),r.textContent="Thank you for participating.",o=C(),s=p("button"),s.textContent="Visit our Instagram",d(r,"class","text-4xl"),d(s,"class","mt-4 px-4 py-2 bg-blue-500 text-white rounded"),d(t,"class","fixed bottom-3 text-center text-white font-mono"),d(e,"class","full-screen-bg svelte-17swels")},m(l,c){y(l,e,c),m(e,t),m(t,r),m(t,o),m(t,s),a||(n=O(s,"click",i[5]),a=!0)},p:A,d(l){l&&b(e),a=!1,n()}}}function B(i){let e,t,r,o=i[0]&&$(i),s=!i[0]&&P(i);return{c(){e=p("main"),o&&o.c(),t=C(),s&&s.c(),d(e,"class","relative w-screen h-screen overflow-hidden flex justify-center items-center"),E(e,"background-color",i[1])},m(a,n){y(a,e,n),o&&o.m(e,null),m(e,t),s&&s.m(e,null),r=!0},p(a,[n]){a[0]?o?(o.p(a,n),n&1&&w(o,1)):(o=$(a),o.c(),w(o,1),o.m(e,t)):o&&(q(),v(o,1,1,()=>{o=null}),V()),a[0]?s&&(s.d(1),s=null):s?s.p(a,n):(s=P(a),s.c(),s.m(e,null)),(!r||n&2)&&E(e,"background-color",a[1])},i(a){r||(w(o),r=!0)},o(a){v(o),r=!1},d(a){a&&b(e),o&&o.d(),s&&s.d()}}}async function F(){try{const i=await fetch("/api/updatelove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!i.ok)throw new Error("Network response was not ok");const e=await i.json();console.log("Love count updated:",e)}catch(i){console.error("Error updating love count:",i)}}function K(i,e,t){let r=!0,o=0,s="#080101",a,n;N(()=>{let u="G-VP97YYDPP0";window.dataLayer=window.dataLayer||[];function _(...g){window.dataLayer.push(g)}_("js",new Date),_("config",u);const h=document.createElement("script");h.src=`https://www.googletagmanager.com/gtm.js?id=${u}`,document.head.append(h),a=new H.Realtime({authUrl:"/ablyauth"}),a.connection.once("connected",()=>{n=a.channels.get("get-started"),fetch("/api/kolown_bot")}),a.connection.on("failed",g=>{console.error("Connection failed:",g)}),t(0,r=!0)});let l=Array(10).fill(null).map((u,_)=>({id:_,url:"https://kolown.net/assets/gitm/heart.svg"}));async function c(u){o+=1,console.log("click:"+o),n.publish("endless","love"),t(2,l=l.filter((_,h)=>h!==u)),l.length===0&&(t(0,r=!1),setTimeout(()=>{a.connection.close(),F(),t(1,s="#080101")},100))}return[r,s,l,c,u=>c(u),()=>window.open("https://instagram.com/kolown","_blank")]}class X extends D{constructor(e){super(),I(this,e,K,B,M,{})}}export{X as default};
