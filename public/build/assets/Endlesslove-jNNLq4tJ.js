import{S as H,a as W,s as q,e as _,b as k,d as b,o as w,f as d,g,n as D,j as h,p as K,q as S,t as M,u as j,v as x,x as V,y as z,z as I}from"./app-DheDvHt2.js";import{a as N}from"./ably-CRSWyFL6.js";function L(a,t,l){const o=a.slice();return o[11]=t[l],o}function T(a){let t;return{c(){t=_("div"),t.textContent="Double tap to send love",b(t,"class","count-display text-stone-50 svelte-11r6vx7")},m(l,o){d(l,t,o)},d(l){l&&h(t)}}}function Y(a){let t,l=a[5][a[1]-1]+"",o;return{c(){t=_("div"),o=M(l),b(t,"class","count-display text-stone-50 svelte-11r6vx7")},m(n,i){d(n,t,i),g(t,o)},p(n,i){i&2&&l!==(l=n[5][n[1]-1]+"")&&j(o,l)},d(n){n&&h(t)}}}function C(a){let t;return{c(){t=_("div"),t.innerHTML=`<p>You have reached the maximum love limit.</p>
                 
            <p>Ghosts_in_the_Machine</p> <p>a love project by:</p> <p class="text-2xl font-extrabold">KoloWn</p>
               

            <p><a href="https://instagram.com/kolown" class="text-2xl font-extrabold">Heart us on Instagram</a></p>`,b(t,"class","count-display text-stone-50 svelte-11r6vx7")},m(l,o){d(l,t,o)},d(l){l&&h(t)}}}function P(a){let t,l,o,n,i=[],p=new Map,r,c=x(a[0]);const f=e=>e[11].id;for(let e=0;e<c.length;e+=1){let s=L(a,c,e),u=f(s);p.set(u,i[e]=E(u))}return{c(){t=M(a[1]),l=k(),o=_("div"),n=k();for(let e=0;e<i.length;e+=1)i[e].c();r=V(),b(o,"class","center-heart svelte-11r6vx7")},m(e,s){d(e,t,s),d(e,l,s),d(e,o,s),d(e,n,s);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,s);d(e,r,s)},p(e,s){s&2&&j(t,e[1]),s&1&&(c=x(e[0]),i=z(i,s,f,1,e,c,p,r.parentNode,I,E,r,L))},d(e){e&&(h(t),h(l),h(o),h(n),h(r));for(let s=0;s<i.length;s+=1)i[s].d(e)}}}function E(a,t){let l;return{key:a,first:null,c(){l=_("div"),b(l,"class","heart svelte-11r6vx7"),this.first=l},m(o,n){d(o,l,n)},p(o,n){},d(o){o&&h(l)}}}function R(a){let t,l,o,n,i,p,r=a[1]==0&&T(),c=a[1]>0&&a[1]<=a[5].length&&Y(a),f=a[4]===!0&&C(),e=a[3]&&P(a);return{c(){t=_("main"),l=_("div"),o=k(),r&&r.c(),n=k(),c&&c.c(),i=k(),f&&f.c(),p=k(),e&&e.c(),b(l,"class","count-display text-stone-50 svelte-11r6vx7"),w(t,"--background-color",a[2]),b(t,"class","font-mono svelte-11r6vx7")},m(s,u){d(s,t,u),g(t,l),g(t,o),r&&r.m(t,null),g(t,n),c&&c.m(t,null),g(t,i),f&&f.m(t,null),g(t,p),e&&e.m(t,null)},p(s,[u]){s[1]==0?r||(r=T(),r.c(),r.m(t,n)):r&&(r.d(1),r=null),s[1]>0&&s[1]<=s[5].length?c?c.p(s,u):(c=Y(s),c.c(),c.m(t,i)):c&&(c.d(1),c=null),s[4]===!0?f||(f=C(),f.c(),f.m(t,p)):f&&(f.d(1),f=null),s[3]?e?e.p(s,u):(e=P(s),e.c(),e.m(t,null)):e&&(e.d(1),e=null),u&4&&w(t,"--background-color",s[2])},i:D,o:D,d(s){s&&h(t),r&&r.d(),c&&c.d(),f&&f.d(),e&&e.d()}}}function U(a,t,l){let o=[],n=0,i="#080101",p=!0,r=!1,c=0,f,e;const s=["You have 9 love credits left","the next love you send will alter the installation","cool right?","Do robots feel love?","look around and double tap","you are now part of the installation","we are all connected","think before you click","Hello, We are KoloWn, this is your last two love credits",""];K(()=>{const m=document.createElement("script");m.src="https://www.googletagmanager.com/gtag/js?id=G-VP97YYDPP0",m.async=!0,document.head.appendChild(m),m.onload=()=>{window.dataLayer=window.dataLayer||[];function v(){dataLayer.push(arguments)}v("js",new Date),v("config","G-VP97YYDPP0")},f=new N.Realtime({authUrl:"/ablyauth"}),f.connection.once("connected",()=>{alert("Welcome to the Ghost_in_the_Machine. You have 10 love credits.")}),e=f.channels.get("get-started"),document.addEventListener("touchend",u)}),S(()=>{document.removeEventListener("touchend",u)});function u(m){const v=new Date().getTime(),y=v-c;y<300&&y>0&&G(),c=v}async function G(){l(1,n+=1),console.log("Count:"+n),n===1&&e.publish("endless","love"),n===2&&e.publish("endless","love"),n===3&&(l(2,i="blue"),alert("alter the installation"),e.publish("state","state3")),n===4&&e.publish("endless","love"),n===5&&e.publish("endless","love"),n===6&&e.publish("endless","love"),n===7&&e.publish("endless","love"),n===8&&(l(2,i="green"),alert("refresh the installation"),e.publish("state","state5")),n===9&&e.publish("endless","love"),n===10&&(l(4,r=!0),l(2,i="red"),e.publish("state","state6"),l(3,p=!1),f.connection.close());const m={id:Date.now()};l(0,o=[...o,m]),setTimeout(()=>{l(0,o=o.filter(v=>v.id!==m.id))},1e3)}return[o,n,i,p,r,s]}class F extends H{constructor(t){super(),W(this,t,U,R,q,{})}}export{F as default};
