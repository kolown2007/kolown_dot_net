import{S as O,i as j,s as D,e as p,a as _,E,b as o,c as q,d as e,F as G,n as C,g as F,q as M,l as k,r as R}from"./app-DZRanwQn.js";import{a as U}from"./ably-D_R5ogrI.js";function S(a){let t,s,h,d,u,i,r,b,n,l,f,m,w,g,v,c;return{c(){t=p("div"),s=p("button"),s.textContent="state1",h=_(),d=p("button"),d.textContent="state2",u=_(),i=p("button"),i.textContent="state3",r=_(),b=p("button"),b.textContent="state4",n=_(),l=p("button"),l.textContent="state5",f=_(),m=p("button"),m.textContent="refresh",w=_(),g=p("button"),g.textContent="love",o(s,"id","send-button-1"),o(s,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(d,"id","send-button-2"),o(d,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(i,"id","send-button-3"),o(i,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(b,"id","send-button-4"),o(b,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(l,"id","send-button-5"),o(l,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(m,"id","send-button-7"),o(m,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(g,"id","send-button-8"),o(g,"class","bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-400 transition duration-300"),o(t,"class","p-4 grid grid-cols-2 gap-8 mt-4")},m(y,x){q(y,t,x),e(t,s),e(t,h),e(t,d),e(t,u),e(t,i),e(t,r),e(t,b),e(t,n),e(t,l),e(t,f),e(t,m),e(t,w),e(t,g),v||(c=[k(s,"click",a[4]),k(d,"click",a[5]),k(i,"click",a[6]),k(b,"click",a[7]),k(l,"click",a[8]),k(m,"click",a[9]),k(g,"click",a[10])],v=!0)},p:C,d(y){y&&F(t),v=!1,R(c)}}}function Y(a){let t,s,h,d,u,i,r,b,n=a[1]&&S(a);return{c(){t=p("main"),s=p("div"),h=p("p"),h.textContent="Online Stats",d=_(),u=p("p"),i=E("active phones: "),r=E(a[0]),b=_(),n&&n.c(),o(h,"class","text-slate-200 font-bold"),o(t,"class","h-screen flex flex-col justify-center items-center px-4 py-10 bg-black text-red-900 font-mono")},m(l,f){q(l,t,f),e(t,s),e(s,h),e(s,d),e(s,u),e(u,i),e(u,r),e(t,b),n&&n.m(t,null)},p(l,[f]){f&1&&G(r,l[0]),l[1]?n?n.p(l,f):(n=S(l),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i:C,o:C,d(l){l&&F(t),n&&n.d()}}}function z(a,t,s){new Date().getFullYear();let h,d,u,i=!1;M(async()=>{try{const c=new U.Realtime({authUrl:"/api/ablyauth"});c.connection.once("connected",function(){alert("you are connected")}),c.connection.on("connected",()=>{s(1,i=!0)}),c.connection.on("disconnected",()=>{s(1,i=!1),alert("you are disconnected")});const y={params:{occupancy:"metrics"}};u=c.channels.get("get-started",y),await u.subscribe("[meta]occupancy",x=>{console.log("occupancy: ",x.data.metrics),h=x.data.metrics.publishers,s(0,d=x.data.metrics.subscribers-x.data.metrics.publishers)})}catch(c){console.error("Error connecting to server:",c)}});function r(c){u.publish("state",c),console.log(c)}function b(c){u.publish("endless",c),console.log(c)}return[d,i,r,b,()=>r("state1"),()=>r("state2"),()=>r("state3"),()=>r("state4"),()=>r("state5"),()=>r("refresh"),()=>b("love")]}class H extends O{constructor(t){super(),j(this,t,z,Y,D,{})}}export{H as default};
