import{D as m,c as y,w as j,i as w,S as D,a as C,s as T,e as g,b as E,d,f as O,g as S,h as x,l as _,n as v,j as F,r as $,k,m as B}from"./app-Y6xH1wBr.js";function P(...a){const n=typeof a[0]=="string"?a[0]:null,h=(typeof a[0]=="string"?a[1]:a[0])||{},r=n?m.restore(n):null;let u=y(h),l=null,c=null,i=e=>e;const p=j({...r?r.data:h,isDirty:!1,errors:r?r.errors:{},hasErrors:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,processing:!1,setStore(e,s){p.update(t=>Object.assign(t,typeof e=="string"?{[e]:s}:e))},data(){return Object.keys(h).reduce((e,s)=>(e[s]=this[s],e),{})},transform(e){return i=e,this},defaults(e,s){return typeof e>"u"?(u=Object.assign(u,y(this.data())),this):(u=Object.assign(u,y(s?{[e]:s}:e)),this)},reset(...e){let s=y(u);return e.length===0?this.setStore(s):this.setStore(Object.keys(s).filter(t=>e.includes(t)).reduce((t,f)=>(t[f]=s[f],t),{})),this},setError(e,s){return this.setStore("errors",{...this.errors,...s?{[e]:s}:e}),this},clearErrors(...e){return this.setStore("errors",Object.keys(this.errors).reduce((s,t)=>({...s,...e.length>0&&!e.includes(t)?{[t]:this.errors[t]}:{}}),{})),this},submit(e,s,t={}){const f=i(this.data()),b={...t,onCancelToken:o=>{if(l=o,t.onCancelToken)return t.onCancelToken(o)},onBefore:o=>{if(this.setStore("wasSuccessful",!1),this.setStore("recentlySuccessful",!1),clearTimeout(c),t.onBefore)return t.onBefore(o)},onStart:o=>{if(this.setStore("processing",!0),t.onStart)return t.onStart(o)},onProgress:o=>{if(this.setStore("progress",o),t.onProgress)return t.onProgress(o)},onSuccess:async o=>{if(this.setStore("processing",!1),this.setStore("progress",null),this.clearErrors(),this.setStore("wasSuccessful",!0),this.setStore("recentlySuccessful",!0),c=setTimeout(()=>this.setStore("recentlySuccessful",!1),2e3),t.onSuccess)return t.onSuccess(o)},onError:o=>{if(this.setStore("processing",!1),this.setStore("progress",null),this.clearErrors().setError(o),t.onError)return t.onError(o)},onCancel:()=>{if(this.setStore("processing",!1),this.setStore("progress",null),t.onCancel)return t.onCancel()},onFinish:()=>{if(this.setStore("processing",!1),this.setStore("progress",null),l=null,t.onFinish)return t.onFinish()}};e==="delete"?m.delete(s,{...b,data:f}):m[e](s,f,b)},get(e,s){this.submit("get",e,s)},post(e,s){this.submit("post",e,s)},put(e,s){this.submit("put",e,s)},patch(e,s){this.submit("patch",e,s)},delete(e,s){this.submit("delete",e,s)},cancel(){l&&l.cancel()}});return p.subscribe(e=>{e.isDirty===w(e.data(),u)&&e.setStore("isDirty",!e.isDirty);const s=Object.keys(e.errors).length>0;e.hasErrors!==s&&e.setStore("hasErrors",!e.hasErrors),n&&m.remember({data:e.data(),errors:e.errors},n)}),p}function q(a){let n,h,r,u,l,c,i,p,e,s,t;return{c(){n=g("main"),h=g("div"),r=g("h1"),r.textContent=`KoloWn App ${a[1]}`,u=E(),l=g("div"),c=g("div"),i=g("input"),p=E(),e=g("button"),e.textContent="Send",d(i,"id","sms"),d(i,"type","string"),d(i,"placeholder","Type a message"),d(i,"class","w-full max-w-96 px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-red-500"),d(e,"id","send-button"),d(e,"class","bg-red-500 text-white px-4 py-2 rounded-r-md hover:bg-red-400 transition duration-300"),d(c,"class","p-4 flex"),d(l,"class","h-screen flex flex-col justify-center"),d(n,"class","h-screen flex flex-col justify-between items-center px-4 py-4 bg-black text-red-900 font-mono")},m(f,b){O(f,n,b),S(n,h),S(h,r),S(n,u),S(n,l),S(l,c),S(c,i),x(i,a[0].sms),S(c,p),S(c,e),s||(t=[_(i,"input",a[4]),_(e,"click",a[3])],s=!0)},p(f,[b]){b&1&&x(i,f[0].sms)},i:v,o:v,d(f){f&&F(n),s=!1,$(t)}}}function A(a,n,h){let r,u=new Date().getFullYear(),l=P({sms:""});k(a,l,p=>h(0,r=p));function c(){r.post("/trigger",{preserveScroll:!0,onSuccess:()=>B(l,r.sms="",r)}),console.log(r.sms)}function i(){r.sms=this.value,l.set(r)}return[r,u,l,c,i]}class I extends D{constructor(n){super(),C(this,n,A,q,T,{})}}export{I as default};
