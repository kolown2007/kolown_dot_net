import{S,a as T,s as B,e as d,d as _,o as b,f as m,A as h,B as p,C as q,j as g,p as F,v as y,E as A,y as G,b as H,F as v,g as w,l as I,G as R,H as U}from"./app-DWYraVgU.js";import{a as z}from"./ably-CEw0Ge6q.js";import{f as D}from"./index-ChWuH1nm.js";function C(u,r,t){const e=u.slice();return e[8]=r[t],e[10]=t,e}function E(u){let r,t=[],e=new Map,n,o=y(u[2]);const i=l=>l[8].id;for(let l=0;l<o.length;l+=1){let s=C(u,o,l),c=i(s);e.set(c,t[l]=j(c,s))}return{c(){r=d("div");for(let l=0;l<t.length;l+=1)t[l].c();_(r,"class","grid grid-cols-3 gap-10 px-10 py-10")},m(l,s){m(l,r,s);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(r,null);n=!0},p(l,s){s&12&&(o=y(l[2]),A(),t=G(t,s,i,1,l,o,e,r,U,j,null,C),q())},i(l){if(!n){for(let s=0;s<o.length;s+=1)h(t[s]);n=!0}},o(l){for(let s=0;s<t.length;s+=1)p(t[s]);n=!1},d(l){l&&g(r);for(let s=0;s<t.length;s+=1)t[s].d()}}}function j(u,r){let t,e,n,o,i,l,s,c;function k(){return r[4](r[10])}return{key:u,first:null,c(){t=d("div"),e=d("img"),o=H(),v(e.src,n=r[8].url)||_(e,"src",n),_(e,"alt","Image"),_(e,"class","w-16"),this.first=t},m(a,f){m(a,t,f),w(t,e),w(t,o),l=!0,s||(c=I(e,"click",k),s=!0)},p(a,f){r=a,(!l||f&4&&!v(e.src,n=r[8].url))&&_(e,"src",n)},i(a){l||(i&&i.end(1),l=!0)},o(a){a&&(i=R(t,D,{y:-200,duration:500})),l=!1},d(a){a&&g(t),a&&i&&i.end(),s=!1,c()}}}function J(u){let r,t,e=u[0]&&E(u);return{c(){r=d("main"),e&&e.c(),_(r,"class","relative w-screen h-screen overflow-hidden flex justify-center items-center"),b(r,"background-color",u[1])},m(n,o){m(n,r,o),e&&e.m(r,null),t=!0},p(n,[o]){n[0]?e?(e.p(n,o),o&1&&h(e,1)):(e=E(n),e.c(),h(e,1),e.m(r,null)):e&&(A(),p(e,1,1,()=>{e=null}),q()),(!t||o&2)&&b(r,"background-color",n[1])},i(n){t||(h(e),t=!0)},o(n){p(e),t=!1},d(n){n&&g(r),e&&e.d()}}}function K(u,r,t){let e,n=0,o="#080101",i,l;F(()=>{i=new z.Realtime({authUrl:"/ablyauth"}),i.connection.once("connected",()=>{l=i.channels.get("get-started")}),t(0,e=!0)});let s=Array(10).fill(null).map((a,f)=>({id:f,url:"https://kolown.net/assets/gitm/heart.svg"}));async function c(a){n+=1,console.log("click:"+n),n===3&&(t(1,o="blue"),l.publish("state","state3")),n===6&&(t(1,o="green"),l.publish("state","state1")),n===9&&(t(1,o="red"),l.publish("state","5"),setTimeout(()=>{i.connection.close(),t(1,o="#080101")},100)),t(2,s=s.filter((f,M)=>M!==a)),s.length===0&&t(0,e=!1),l.publish("endless","love")}return[e,o,s,c,a=>c(a)]}class P extends S{constructor(r){super(),T(this,r,K,J,B,{})}}export{P as default};
