import{S as G,a as K,s as N,e as _,b as k,d as m,o as w,f as d,g as v,n as T,j as h,p as R,q as U,t as H,u as S,v as C,x as W,y as Y,z as A}from"./app-DX_VjkU8.js";import{a as B}from"./ably-WGFgY3Gw.js";function D(n,e,l){const s=n.slice();return s[11]=e[l],s}function E(n){let e;return{c(){e=_("div"),e.textContent="you have 15 love power",m(e,"class","count-display text-stone-50 svelte-23kop5")},m(l,s){d(l,e,s)},d(l){l&&h(e)}}}function L(n){let e,l=n[5][n[1]-1]+"",s;return{c(){e=_("div"),s=H(l),m(e,"class","count-display text-stone-50 svelte-23kop5")},m(a,i){d(a,e,i),v(e,s)},p(a,i){i&2&&l!==(l=a[5][a[1]-1]+"")&&S(s,l)},d(a){a&&h(e)}}}function M(n){let e;return{c(){e=_("div"),e.innerHTML=`<p>You have reached the maximum love limit.</p>
         
         
         
        <p>Ghosts_in_the_Machine</p> <p>a love project by:</p> <p class="text-2xl font-extrabold">KoloWn</p>`,m(e,"class","count-display text-stone-50 svelte-23kop5")},m(l,s){d(l,e,s)},d(l){l&&h(e)}}}function q(n){let e,l,s,a,i=[],p=new Map,c,r=C(n[0]);const f=t=>t[11].id;for(let t=0;t<r.length;t+=1){let o=D(n,r,t),u=f(o);p.set(u,i[t]=j(u))}return{c(){e=H(n[1]),l=k(),s=_("div"),a=k();for(let t=0;t<i.length;t+=1)i[t].c();c=W(),m(s,"class","center-heart svelte-23kop5")},m(t,o){d(t,e,o),d(t,l,o),d(t,s,o),d(t,a,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,o);d(t,c,o)},p(t,o){o&2&&S(e,t[1]),o&1&&(r=C(t[0]),i=Y(i,o,f,1,t,r,p,c.parentNode,A,j,c,D))},d(t){t&&(h(e),h(l),h(s),h(a),h(c));for(let o=0;o<i.length;o+=1)i[o].d(t)}}}function j(n,e){let l;return{key:n,first:null,c(){l=_("div"),m(l,"class","heart svelte-23kop5"),this.first=l},m(s,a){d(s,l,a)},p(s,a){},d(s){s&&h(l)}}}function F(n){let e,l,s,a,i,p,c=n[1]==0&&E(),r=n[1]>0&&n[1]<=n[5].length&&L(n),f=n[4]===!0&&M(),t=n[3]&&q(n);return{c(){e=_("main"),l=_("div"),s=k(),c&&c.c(),a=k(),r&&r.c(),i=k(),f&&f.c(),p=k(),t&&t.c(),m(l,"class","count-display text-stone-50 svelte-23kop5"),w(e,"--background-color",n[2]),m(e,"class","svelte-23kop5")},m(o,u){d(o,e,u),v(e,l),v(e,s),c&&c.m(e,null),v(e,a),r&&r.m(e,null),v(e,i),f&&f.m(e,null),v(e,p),t&&t.m(e,null)},p(o,[u]){o[1]==0?c||(c=E(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),o[1]>0&&o[1]<=o[5].length?r?r.p(o,u):(r=L(o),r.c(),r.m(e,i)):r&&(r.d(1),r=null),o[4]===!0?f||(f=M(),f.c(),f.m(e,p)):f&&(f.d(1),f=null),o[3]?t?t.p(o,u):(t=q(o),t.c(),t.m(e,null)):t&&(t.d(1),t=null),u&4&&w(e,"--background-color",o[2])},i:T,o:T,d(o){o&&h(e),c&&c.d(),r&&r.d(),f&&f.d(),t&&t.d()}}}function I(n,e,l){let s=[],a=0,i="#080101",p=!0,c=!1,r=0,f,t;const o=["double tap the heart to send love","Do robots feel love?","where is the love?","the next love you send will alter the installation","cool right?","think before you click","we are all connected","you are now part of the installation","love is a now a currency","you have 5 love left","if love is the answer","what is the question?","make love not war","mahal ko kayo"];R(()=>{f=new B.Realtime({authUrl:"/ablyauth"}),f.connection.once("connected",()=>{alert("double tap the heart to send love")}),t=f.channels.get("get-started"),document.addEventListener("touchend",u)}),U(()=>{document.removeEventListener("touchend",u)});function u(y){const b=new Date().getTime(),g=b-r;g<300&&g>0&&z(),r=b}async function z(){l(1,a+=1),console.log("Count:"+a),a===5&&(l(2,i="blue"),t.publish("state","state3"),alert("alter the installation")),a===10&&(l(2,i="green"),t.publish("state","state3"),alert("refresh the installation")),a===15&&(l(4,c=!0),l(2,i="red"),t.publish("state","state6"),l(3,p=!1),f.connection.close()),t.publish("endless","love");const y={id:Date.now()};l(0,s=[...s,y]),setTimeout(()=>{l(0,s=s.filter(b=>b.id!==y.id))},1e3)}return[s,a,i,p,c,o]}class P extends G{constructor(e){super(),K(this,e,I,F,N,{})}}export{P as default};
