import{S as x,i as _,s as S,e as d,a as b,b as a,c as j,d as c,f as w,l as y,n as v,g as k,r as C,q as $,h as E,j as M}from"./app-TzMZvQYG.js";import{a as q}from"./ably-wfrT6SWo.js";import{u as D}from"./useForm-5FnxmxbV.js";function F(u){let s,m,t,g,l,n,e,p,i,f,r;return{c(){s=d("main"),m=d("div"),t=d("h1"),t.textContent=`KoloWn App ${u[1]}`,g=b(),l=d("div"),n=d("div"),e=d("input"),p=b(),i=d("button"),i.textContent="Send",a(e,"id","sms"),a(e,"type","string"),a(e,"placeholder","1 word only"),a(e,"class","w-full max-w-96 px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-red-500"),a(i,"id","send-button"),a(i,"class","bg-red-500 text-white px-4 py-2 rounded-r-md hover:bg-red-400 transition duration-300"),a(n,"class","p-4 flex"),a(l,"class","h-screen flex flex-col justify-center"),a(s,"class","h-screen flex flex-col justify-between items-center px-4 py-4 bg-black text-red-900 font-mono")},m(o,h){j(o,s,h),c(s,m),c(m,t),c(s,g),c(s,l),c(l,n),c(n,e),w(e,u[0].sms),c(n,p),c(n,i),f||(r=[y(e,"input",u[4]),y(i,"click",u[3])],f=!0)},p(o,[h]){h&1&&w(e,o[0].sms)},i:v,o:v,d(o){o&&k(s),f=!1,C(r)}}}function N(u,s,m){let t,g=new Date().getFullYear(),l="",n,e;$(()=>{n=new q.Realtime({authUrl:"/ablyauth"}),n.connection.once("connected",()=>{e=n.channels.get("ghostwriter")})});let p=D({sms:""});E(u,p,r=>m(0,t=r));async function i(){const r=t.sms.trim();if(r.split(" ").length>1)l="Please enter only one word.",alert(l);else{l="",e.publish("message",r),console.log(r);try{const o=await fetch("/api/ghostwritermessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r})});if(!o.ok)throw new Error("Network response was not ok");const h=await o.json();console.log("Message sent to server successfully:",h)}catch(o){console.error("Error sending message to server:",o)}M(p,t.sms="",t)}}function f(){t.sms=this.value,p.set(t)}return[t,g,p,i,f]}class A extends x{constructor(s){super(),_(this,s,N,F,S,{})}}export{A as default};
